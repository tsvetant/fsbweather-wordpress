<?php/*Plugin Name: Fullscreen Background WeatherPlugin URI: http://gamebird-studios.com/fsb-weather-wordpress/Description: This plugin will generate fullscreen background with dynamic weather ..Author: Gamebird StudiosVersion: 1.1.0Author URI: http://www.gamebird-studios.com/*/// ----------------------------------------------------------------------------------// ADD Styles and Script in head section//include_once('admin/fwbups.php');add_action('admin_init', 'fsbwether_backend_scripts');add_action('wp_enqueue_scripts', 'fsbwether_frontend_scripts');function fsbwether_backend_scripts() {	global $pagenow;	if(is_admin()){		wp_enqueue_script('jquery');		//TagIt Requirements		wp_enqueue_script('jquery-ui-core');		wp_enqueue_script('jquery-ui-widget');		wp_enqueue_script('jquery-ui-autocomplete');		if((isset($_GET['page']) && $_GET['page'] == "fsbwether") || ($pagenow == 'post.php' && $_GET['action'] == 'edit') || ($pagenow == 'edit.php' && $_GET['action'] == 'edit')) {			// Admin Javascript 			wp_enqueue_script('fsbwether_backend_scripts',plugins_url('admin/fsbwether_admin.js',__FILE__), array('jquery'));			wp_enqueue_script('spectrum',plugins_url('admin/spectrum.js',__FILE__), array('jquery'));			wp_enqueue_script('simple-slider',plugins_url('admin/simple-slider.min.js',__FILE__), array('jquery'));			wp_enqueue_script('colorpickerjs',plugins_url('admin/gradient/colorpicker/js/colorpicker.js',__FILE__), array('jquery'));			wp_enqueue_script('domgrad',plugins_url('admin/gradient/dom-drag.js',__FILE__), array('jquery'));			wp_enqueue_script('gradX',plugins_url('admin/gradient/gradX.js',__FILE__), array('jquery'));			wp_enqueue_script('tag-it', plugins_url('admin/tagit/js/tag-it.js',__FILE__), array('jquery'), "", true);			// Admin CSS			wp_enqueue_style('fsbwether_backend_scripts',plugins_url('admin/fsbwether_admin.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('spectrum',plugins_url('admin/spectrum.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('simple-slider',plugins_url('admin/simple-slider.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('simple-slider-volume',plugins_url('admin/simple-slider-volume.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('gradX',plugins_url('admin/gradient/gradX.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('colorpickerscss',plugins_url('admin/gradient/colorpicker/css/colorpicker.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('jquerytagit',plugins_url('admin/tagit/css/jquery.tagit.css',__FILE__), false, '1.0.0' );			wp_enqueue_style('tagitui-zendesk',plugins_url('admin/tagit/css/tagit.ui-zendesk.css',__FILE__), false, '1.0.0' );			// System (Farbtastic)			wp_enqueue_script('farbtastic');			wp_enqueue_style('farbtastic');			}		if(isset($_GET['page']) && $_GET['page']=="fsbwether"){			wp_enqueue_script('media-upload');			wp_enqueue_script('thickbox');			wp_enqueue_style('thickbox');				}	}}function fsbwether_frontend_scripts() {		if(!is_admin()){		$opt = get_option('fsbwether_options');		if($opt['fsbwEnable']){			wp_enqueue_script('jquery');			wp_enqueue_script('weatherbackground', plugins_url('js/weatherbackground.php',__FILE__), array('jquery'), '5.5.0&id='.get_the_ID(), true);			wp_enqueue_style('weatherbackground', plugins_url('css/weatherbackground.css',__FILE__));			if($opt['fsbwFixedModule'])				wp_enqueue_style('weatherbackground-module', plugins_url('css/module/'.$opt['fsbwWidgetStyle'].'.css',__FILE__));			wp_enqueue_style('animate', plugins_url('css/animate.min.css',__FILE__));		}	}}//---------------------------------------------------------------//------------------- MAIN ADMIN MENU OPTIONS -------------------//---------------------------------------------------------------add_action('admin_menu', 'fsbwether_plugin_admin_menu');function fsbwether_plugin_admin_menu() {     add_menu_page('fsbwether', 'FSB Weather','administrator', 'fsbwether', 'fsbwether_backend_menu', plugins_url('images/icon.png',__FILE__));}//---------------------------------------------------------------//------------------- LOCATION MENU FUNCTIONS -------------------//---------------------------------------------------------------function filter($data) { //Filters data against security risks.    if (is_array($data)) {        foreach ($data as $key => $element) {            $data[$key] = filter($element);        }    } else {        $data = trim(htmlentities(strip_tags($data)));        if(get_magic_quotes_gpc()) $data = stripslashes($data);        $data = mysql_real_escape_string($data);    }    return $data;}$fsbw = $_GET['fsbw'];if(isset($_GET['fsbw']) && !empty($_GET['fsbw'])){	$options = get_option('fsbwether_options');	$fsbw = filter($fsbw);	$fsbw = preg_replace("/[^A-Za-z0-9 ]/", '', $fsbw);	$citiesmenu = $options['fsbwCitiesMenu'];	$citiesmenu = explode( ',', $citiesmenu );	if (in_array($fsbw, $citiesmenu)) {		setcookie("fsbw", $fsbw, time()+3600);		delete_transient('get_weather');	} else {		if($fsbw == "default"){			delete_transient('get_weather');			setcookie("fsbw", "", time() - 3600);		} else {			return false;		}	}	echo '<script>window.location.replace("'.home_url().'");</script>';}//This function will create new database fields with default valuesfunction fsbwether_defaults(){	    $default = array(		'fsbwEnable'				=> 1,		'fsbwAutodetect'			=> 0,		'fsbwCity'					=> 'New York',		'fsbwZIP'					=> '',		'fsbwWOEID'					=> '',		'fsbwUnit'					=> 'c',		'fsbwPattern'				=> 'a1',		'fsbwCPattern'				=> '',		'fsbwWidget'				=> 1,		'fsbwNoVideo'				=> 0,		'fsbwWidgetActive'			=> 1,		'fsbwWidgetStyle'			=> 'var1',		'fsbwFixedModule'			=> 1,		'fsbwUsePattern'			=> 'option1',		'fsbwCitiesMenu'			=> 'fsbwCitiesMenu',		'gradx_code'				=> '',		'gradx_gradient_type'		=> '',		'fsbw_shards_color1'		=>	"10,35,180,.15",		'fsbw_shards_color2'		=>	"255,20,220,.25",		'fsbw_shards_shadecolor'	=>	"0,0,0,.25",		'fsbw_shards_countshards'	=>	"20",		'fsbw_shards_comlexity'		=>	"0.58",		'fsbw_shards_lightness'		=>	"2",		'fsbw_shards_alpha'			=>	"0.15"    );return $default;}function fsbwether_plugin_install() {    add_option('fsbwether_options', fsbwether_defaults());}	// Runs when plugin is activated and creates new database fieldregister_activation_hook(__FILE__,'fsbwether_plugin_install');// update the fsbwether optionsif(isset($_POST['fsbwether_update'])){	update_option('fsbwether_options', fsbwether_updates());}function fsbwether_updates() {	$options = $_POST['fsbwether_options'];	$update_val = array(		'fsbwEnable'				=>	$options['fsbwEnable'],		'fsbwAutodetect'			=>	$options['fsbwAutodetect'],		'fsbwCity'					=>	$options['fsbwCity'],		'fsbwZIP'					=>	$options['fsbwZIP'],		'fsbwWOEID'					=>	$options['fsbwWOEID'],		'fsbwUnit'					=>	$options['fsbwUnit'],		'fsbwPattern'				=>	$options['fsbwPattern'],		'fsbwCPattern'				=>	$options['fsbwCPattern'],		'fsbwWidget'				=>	$options['fsbwWidget'],		'fsbwNoVideo'				=>	$options['fsbwNoVideo'],		'fsbwWidgetActive'			=>	$options['fsbwWidgetActive'],		'fsbwWidgetStyle'			=>	$options['fsbwWidgetStyle'],		'fsbwFixedModule'			=>	$options['fsbwFixedModule'],		'fsbwUsePattern'			=>	$options['fsbwUsePattern'],		'fsbwCitiesMenu'			=>	$options['fsbwCitiesMenu'],		'gradx_code'				=>	$options['gradx_code'],		'gradx_gradient_type'		=>	$options['gradx_gradient_type'],		'fsbw_shards_color1'		=>	str_replace(")", "", str_replace("rgba(", "", $options['fsbw_shards_color1'])),		'fsbw_shards_color2'		=>	str_replace(")", "", str_replace("rgba(", "", $options['fsbw_shards_color2'])),		'fsbw_shards_shadecolor'	=>	str_replace(")", "", str_replace("rgba(", "", $options['fsbw_shards_shadecolor'])),		'fsbw_shards_countshards'	=>	$options['fsbw_shards_countshards'],		'fsbw_shards_comlexity'		=>	$options['fsbw_shards_comlexity'],		'fsbw_shards_lightness'		=>	$options['fsbw_shards_lightness'],		'fsbw_shards_alpha'			=>	$options['fsbw_shards_alpha'],    );	return $update_val;}// Register and define the settingsadd_action('admin_init', 'fsbwdebug_admin_init');function fsbwdebug_admin_init(){	register_setting(		'general',                 		// settings page		'fsbwdebug_options',          	// option name		'fsbwdebug_validate_options'  	// validation callback	);	add_settings_field(		'fsbwdebug_activity',      		// id		'FSBWeather Debug',             // setting title		'fsbwdebug_setting_input',    	// display callback		'general',                 		// settings page		'default'                  		// settings section	);}// Display and fill the form fieldfunction fsbwdebug_setting_input() {	$options = get_option( 'fsbwdebug_options' );	$value = $options['fsbwdebug'];	$value ? $checked = "checked" :	$checked = "";	echo "<input id='fsbwdebug' name='fsbwdebug_options[fsbwdebug]' ".$checked." type='checkbox' value='1' /> Enables debug for FSB Weather plugin. (<strong style='color:darkred;'>Developers only</strong>)";}function fsbwdebug_validate_options( $input ) {return $input;}function fsbwether_backend_menu() {	wp_nonce_field('update-options'); 	$options = get_option('fsbwether_options'); //echo fsbwether_update(); ?><div class="wrap">	<div id="icon-themes" class="icon32"></div>	<h2><?php _e('Fullscreen Background Weather 1.1 Settings','fsbwether'); ?></h2></div><br /><div style="width:700px;">	<div class="postbox fwbslide_wrap" id="fsbwether_post_metas" style="padding:20px;">		<form method="post" class="fsbwether_form">		<table class="form-table">			<tbody>				<tr>					<th scope="row"><?php _e('Enable weather reports','fsbwether'); ?></th>					<td><label><input name="fsbwether_options[fsbwEnable]" type="checkbox" <?php if($options['fsbwEnable']){ ?> checked <?php } ?> value="1"> <?php _e('Enable/disable the plugin','fsbwether'); ?></label></td>				</tr>				<tr>					<th scope="row"><?php _e('Autodetect location','fsbwether'); ?></th>					<td><label><input name="fsbwether_options[fsbwAutodetect]" type="checkbox" <?php if($options['fsbwAutodetect']){ ?> checked <?php } ?> value="1"> <?php _e('Show weather within detecting your location by IP (<strong>If it\'s enabled it will overwrite the City, ZIP or WOEID options.</strong>) ','fsbwether'); ?></label></td>				</tr>				<tr>					<th scope="row"><?php _e("City",'fsbwether'); ?> </th>					<td>						<fieldset>							<legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend>							<label><input type="text" value="<?php if($options['fsbwCity']) echo $options['fsbwCity']; else echo "New York"; ?>" name="fsbwether_options[fsbwCity]" /> <?php _e('Get weather for specified city. (<strong>If autodetect is off</strong>)','fsbwether'); ?></label>							<br>						</fieldset>					</td>				</tr>				<tr>					<th scope="row"><?php _e("ZIP Code",'fsbwether'); ?> </th>					<td>						<fieldset>							<legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend>							<label><input type="text" value="<?php if($options['fsbwZIP']) echo $options['fsbwZIP']; else echo ""; ?>" name="fsbwether_options[fsbwZIP]" /> <?php _e('You can use instead of city','fsbwether'); ?></label>							<br>						</fieldset>					</td>				</tr>				<tr>					<th scope="row"><?php _e("WOEID",'fsbwether'); ?> </th>					<td>						<fieldset>							<legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend>							<label><input type="text" value="<?php if($options['fsbwWOEID']) echo $options['fsbwWOEID']; else echo ""; ?>" name="fsbwether_options[fsbwWOEID]" /> <?php _e('Special code that is used to determine location by Yahoo and Google services API. It\'s faster than using city most of the times, you can use it instead of city or ZIP code ( You can find one <a href="http://woeid.rosselliot.co.nz/lookup/" target="_blank">here</a> )','fsbwether'); ?></label>							<br>						</fieldset>					</td>				</tr>				<tr>					<th scope="row"><?php _e('Temperature unit','fsbwether'); ?></th>					<td>						<label>							<select name="fsbwether_options[fsbwUnit]">								<option value="c" <?php if($options['fsbwUnit'] == "c"){ ?> selected <?php } ?>>c</option>								<option value="f" <?php if($options['fsbwUnit'] == "f"){ ?> selected <?php } ?>>f</option>							</select> <?php _e('Pick between Celsius and Fahrenheit <strong>(Default: c)</strong>','fsbwether'); ?>						</label>					</td>				</tr>				<tr>					<th scope="row"><?php _e('Background Overlay','fsbwether'); ?></th>					<td>						<label>							<select name="fsbwether_options[fsbwUsePattern]" id="fsbwselect">								<option value="option0" <?php if($options['fsbwUsePattern'] == "option0"){ ?> selected <?php } ?>>None</option>								<option value="option1" <?php if($options['fsbwUsePattern'] == "option1"){ ?> selected <?php } ?>>Pattern</option>								<option value="option2" <?php if($options['fsbwUsePattern'] == "option2"){ ?> selected <?php } ?>>Shards</option>								<option value="option3" <?php if($options['fsbwUsePattern'] == "option3"){ ?> selected <?php } ?>>Gradient</option>							</select> <?php _e('Select \'None\' if you don\'t want any overlay. You can use also image pattern or random generated shards.<strong>(Default: Pattern)</strong>','fsbwether'); ?>						</label>					</td>				</tr>				<!-- PATTERN OPTIONS -->				<tr class="pattopt_1">					<th scope="row"><?php _e('Select pattern','fsbwether'); ?></th>					<td>						<fieldset>							<div class="color-option">								<input name="fsbwether_options[fsbwPattern]" id="a1" type="radio" value="a1" class="tog" <?php if($options['fsbwPattern'] == "a1"){ ?> checked="checked" <?php } ?>><label for="a1"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a2" type="radio" value="a2"  class="tog" <?php if($options['fsbwPattern'] == "a2"){ ?> checked="checked" <?php } ?> ><label for="a2"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a3" type="radio" value="a3"  class="tog" <?php if($options['fsbwPattern'] == "a3"){ ?> checked="checked" <?php } ?> ><label for="a3"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a4" type="radio" value="a4"  class="tog" <?php if($options['fsbwPattern'] == "a4"){ ?> checked="checked" <?php } ?> ><label for="a4"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a5" type="radio" value="a5"  class="tog" <?php if($options['fsbwPattern'] == "a5"){ ?> checked="checked" <?php } ?> ><label for="a5"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a6" type="radio" value="a6"  class="tog" <?php if($options['fsbwPattern'] == "a6"){ ?> checked="checked" <?php } ?> ><label for="a6"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a8" type="radio" value="a8"  class="tog" <?php if($options['fsbwPattern'] == "a8"){ ?> checked="checked" <?php } ?> ><label for="a7"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a9" type="radio" value="a9"  class="tog" <?php if($options['fsbwPattern'] == "a9"){ ?> checked="checked" <?php } ?> ><label for="a9"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a10" type="radio" value="a10"  class="tog" <?php if($options['fsbwPattern'] == "a10"){ ?> checked="checked" <?php } ?> ><label for="a10"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a11" type="radio" value="a11"  class="tog" <?php if($options['fsbwPattern'] == "a11"){ ?> checked="checked" <?php } ?> ><label for="a11"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a12" type="radio" value="a12"  class="tog" <?php if($options['fsbwPattern'] == "a12"){ ?> checked="checked" <?php } ?> ><label for="a12"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a13" type="radio" value="a13"  class="tog" <?php if($options['fsbwPattern'] == "a13"){ ?> checked="checked" <?php } ?> ><label for="a13"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a14" type="radio" value="a14"  class="tog" <?php if($options['fsbwPattern'] == "a14"){ ?> checked="checked" <?php } ?> ><label for="a14"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a15" type="radio" value="a15"  class="tog" <?php if($options['fsbwPattern'] == "a15"){ ?> checked="checked" <?php } ?> ><label for="a15"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a16" type="radio" value="a16"  class="tog" <?php if($options['fsbwPattern'] == "a16"){ ?> checked="checked" <?php } ?> ><label for="a16"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a17" type="radio" value="a17"  class="tog" <?php if($options['fsbwPattern'] == "a17"){ ?> checked="checked" <?php } ?> ><label for="a17"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a18" type="radio" value="a18"  class="tog" <?php if($options['fsbwPattern'] == "a18"){ ?> checked="checked" <?php } ?> ><label for="a18"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a19" type="radio" value="a19"  class="tog" <?php if($options['fsbwPattern'] == "a19"){ ?> checked="checked" <?php } ?> ><label for="a19"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a20" type="radio" value="a20"  class="tog" <?php if($options['fsbwPattern'] == "a20"){ ?> checked="checked" <?php } ?> ><label for="a20"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a21" type="radio" value="a21"  class="tog" <?php if($options['fsbwPattern'] == "a21"){ ?> checked="checked" <?php } ?> ><label for="a21"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a22" type="radio" value="a22"  class="tog" <?php if($options['fsbwPattern'] == "a22"){ ?> checked="checked" <?php } ?> ><label for="a22"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a23" type="radio" value="a23"  class="tog" <?php if($options['fsbwPattern'] == "a23"){ ?> checked="checked" <?php } ?> ><label for="a23"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a24" type="radio" value="a24"  class="tog" <?php if($options['fsbwPattern'] == "a24"){ ?> checked="checked" <?php } ?> ><label for="a24"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a25" type="radio" value="a25"  class="tog" <?php if($options['fsbwPattern'] == "a25"){ ?> checked="checked" <?php } ?> ><label for="a25"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a26" type="radio" value="a26"  class="tog" <?php if($options['fsbwPattern'] == "a26"){ ?> checked="checked" <?php } ?> ><label for="a26"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a27" type="radio" value="a27"  class="tog" <?php if($options['fsbwPattern'] == "a27"){ ?> checked="checked" <?php } ?> ><label for="a27"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a28" type="radio" value="a28"  class="tog" <?php if($options['fsbwPattern'] == "a28"){ ?> checked="checked" <?php } ?> ><label for="a28"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a29" type="radio" value="a29"  class="tog" <?php if($options['fsbwPattern'] == "a29"){ ?> checked="checked" <?php } ?> ><label for="a29"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a30" type="radio" value="a30"  class="tog" <?php if($options['fsbwPattern'] == "a30"){ ?> checked="checked" <?php } ?> ><label for="a30"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a31" type="radio" value="a31"  class="tog" <?php if($options['fsbwPattern'] == "a31"){ ?> checked="checked" <?php } ?> ><label for="a31"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a32" type="radio" value="a32"  class="tog" <?php if($options['fsbwPattern'] == "a32"){ ?> checked="checked" <?php } ?> ><label for="a32"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a33" type="radio" value="a33"  class="tog" <?php if($options['fsbwPattern'] == "a33"){ ?> checked="checked" <?php } ?> ><label for="a33"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a34" type="radio" value="a34"  class="tog" <?php if($options['fsbwPattern'] == "a34"){ ?> checked="checked" <?php } ?> ><label for="a34"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a35" type="radio" value="a35"  class="tog" <?php if($options['fsbwPattern'] == "a35"){ ?> checked="checked" <?php } ?> ><label for="a35"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a36" type="radio" value="a36"  class="tog" <?php if($options['fsbwPattern'] == "a36"){ ?> checked="checked" <?php } ?> ><label for="a36"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a37" type="radio" value="a37"  class="tog" <?php if($options['fsbwPattern'] == "a37"){ ?> checked="checked" <?php } ?> ><label for="a37"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a38" type="radio" value="a38"  class="tog" <?php if($options['fsbwPattern'] == "a38"){ ?> checked="checked" <?php } ?> ><label for="a38"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a39" type="radio" value="a39"  class="tog" <?php if($options['fsbwPattern'] == "a39"){ ?> checked="checked" <?php } ?> ><label for="a39"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a40" type="radio" value="a40"  class="tog" <?php if($options['fsbwPattern'] == "a40"){ ?> checked="checked" <?php } ?> ><label for="a40"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a41" type="radio" value="a41"  class="tog" <?php if($options['fsbwPattern'] == "a41"){ ?> checked="checked" <?php } ?> ><label for="a41"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a42" type="radio" value="a42"  class="tog" <?php if($options['fsbwPattern'] == "a42"){ ?> checked="checked" <?php } ?> ><label for="a42"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a43" type="radio" value="a43"  class="tog" <?php if($options['fsbwPattern'] == "a43"){ ?> checked="checked" <?php } ?> ><label for="a43"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a44" type="radio" value="a44"  class="tog" <?php if($options['fsbwPattern'] == "a44"){ ?> checked="checked" <?php } ?> ><label for="a44"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a45" type="radio" value="a45"  class="tog" <?php if($options['fsbwPattern'] == "a45"){ ?> checked="checked" <?php } ?> ><label for="a45"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a46" type="radio" value="a46"  class="tog" <?php if($options['fsbwPattern'] == "a46"){ ?> checked="checked" <?php } ?> ><label for="a46"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a47" type="radio" value="a47"  class="tog" <?php if($options['fsbwPattern'] == "a47"){ ?> checked="checked" <?php } ?> ><label for="a47"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a48" type="radio" value="a48"  class="tog" <?php if($options['fsbwPattern'] == "a48"){ ?> checked="checked" <?php } ?> ><label for="a48"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a49" type="radio" value="a49"  class="tog" <?php if($options['fsbwPattern'] == "a49"){ ?> checked="checked" <?php } ?> ><label for="a49"></label>  								<input name="fsbwether_options[fsbwPattern]" id="a50" type="radio" value="a50"  class="tog" <?php if($options['fsbwPattern'] == "a50"){ ?> checked="checked" <?php } ?> ><label for="a50"></label>  							</div>						</fieldset>					</td>				</tr>					<tr class="pattopt_1">					<th scope="row"><?php _e('Custom pattern','fsbwether'); ?></th>					<td>						<label><input type="text" class="fwb_uploadimg" name="fsbwether_options[fsbwCPattern]" value="<?php if($options['fsbwCPattern']) echo $options['fsbwCPattern']; else echo ""; ?>" /><input class="fwb_uploadbtn button" type="button" value="Browse.." /> <?php _e('Upload custom pattern','fsbwether'); ?></label>					</td>				</tr>				<!-- SHARD OPTIONS -->				<tr class="pattopt_2">					<th scope="row"><?php _e("Color 1",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label>						<input type="text" value="<?php if($options['fsbw_shards_color1']) echo $options['fsbw_shards_color1']; else echo "10,35,180,.15"; ?>" name="fsbwether_options[fsbw_shards_color1]" id="fsbw_shards_color1_PREV" /> 						<script>						jQuery(function() {						    jQuery("#fsbw_shards_color1_PREV").spectrum({						      flat: false,						      showInput: true,							  showAlpha: true,							  showInitial: true,							  color: "rgba(<?php if($options['fsbw_shards_color1']) echo $options['fsbw_shards_color1']; else echo '10,35,180,.15'; ?>)"						    }); //jQuery("#fsbw_shards_color1_PREV").show();						});						</script>						<?php _e('Select the first color of your shards. Lower the opacity to see your background. <strong>(Default: 10,35,180,.15)</strong>','fsbwether'); ?></label>					</td>				</tr>				<tr class="pattopt_2">					<th scope="row"><?php _e("Color 2",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label>						<input type="text" value="<?php if($options['fsbw_shards_color2']) echo $options['fsbw_shards_color2']; else echo "255,20,220,.25"; ?>" name="fsbwether_options[fsbw_shards_color2]" id="fsbw_shards_color2_PREV" /> 						<script>						jQuery(function() {						    jQuery("#fsbw_shards_color2_PREV").spectrum({						      flat: false,						      showInput: true,							  showAlpha: true,							  showInitial: true,							  color: "rgba(<?php if($options['fsbw_shards_color2']) echo $options['fsbw_shards_color2']; else echo '255,20,220,.25'; ?>)"						    }); //jQuery("#fsbw_shards_color2_PREV").show();						});						</script>						<?php _e('Select the second color of your shards. Lower the opacity to see your background. <strong>(Default: 255,20,220,.25)</strong>','fsbwether'); ?></label>				</tr>				<tr class="pattopt_2">					<th scope="row"><?php _e("Shade Color",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label>						<input type="text" value="<?php if($options['fsbw_shards_shadecolor']) echo $options['fsbw_shards_shadecolor']; else echo "0,0,0,.25"; ?>" name="fsbwether_options[fsbw_shards_shadecolor]" id="fsbw_shards_shadecolor_PREV" /> <?php _e('DESC','fsbwether'); ?>						<script>						jQuery(function() {						    jQuery("#fsbw_shards_shadecolor_PREV").spectrum({						      flat: false,						      showInput: true,							  showAlpha: true,							  showInitial: true,							  color: "rgba(<?php if($options['fsbw_shards_shadecolor']) echo $options['fsbw_shards_shadecolor']; else echo '0,0,0,.25'; ?>)"						    }); //jQuery("#fsbw_shards_shadecolor_PREV").show();						});						</script>						<?php _e('Select the second color of your shards. Lower the opacity to see your background. <strong>(Default: 255,20,220,.25)</strong>','fsbwether'); ?></label>						</label>					</td>				</tr>				<tr class="pattopt_2">					<th scope="row"><?php _e("Number of Shards",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label><input type="text" value="<?php if($options['fsbw_shards_countshards']) echo $options['fsbw_shards_countshards']; else echo "20"; ?>" name="fsbwether_options[fsbw_shards_countshards]" data-slider="true" data-slider-step="1" data-slider-range="1,100" data-slider-highlight="true" /> <?php _e('Select the number of shards that your page will be divided on.<strong>(Default: 20)</strong>','fsbwether'); ?></label></td>				</tr>				<tr class="pattopt_2">					<th scope="row"><?php _e("Comlexity",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label><input type="text" value="<?php if($options['fsbw_shards_comlexity']) echo $options['fsbw_shards_comlexity']; else echo "0.58"; ?>" name="fsbwether_options[fsbw_shards_comlexity]" data-slider="true" data-slider-step="0.01" data-slider-range="0.1,1" data-slider-highlight="true" /> <?php _e('Select the complexity of shards positioning. Increase for more complex backgrounds.<strong>(Default: 0.58)</strong>','fsbwether'); ?></label></td>				</tr>				<tr class="pattopt_2">					<th scope="row"><?php _e("Lightness",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label><input type="text" value="<?php if($options['fsbw_shards_lightness']) echo $options['fsbw_shards_lightness']; else echo "2"; ?>" name="fsbwether_options[fsbw_shards_lightness]" data-slider="true" data-slider-step="1" data-slider-range="1,3" data-slider-highlight="true" /> <?php _e('Select the lightness of your background.<strong>(Default: 2)</strong>','fsbwether'); ?></label></td>				</tr>				<tr class="pattopt_2">					<th scope="row"><?php _e("Alpha",'fsbwether'); ?> </th>					<td><legend class="screen-reader-text"><span><?php _e("Background Color",'fsbwether'); ?></span></legend><label><input type="text" value="<?php if($options['fsbw_shards_alpha']) echo $options['fsbw_shards_alpha']; else echo "0.15"; ?>" name="fsbwether_options[fsbw_shards_alpha]" data-slider="true" data-slider-step="0.01" data-slider-range="0.1,1" data-slider-highlight="true" /> <?php _e('Select the color strength of your shards.<strong>(Default: 0.15)</strong>','fsbwether'); ?></label></td>				</tr>				<script>				jQuery("[data-slider]").each(function () {				  var input = jQuery(this);				  jQuery("<span>").addClass("output").insertAfter(jQuery(this));				}).bind("slider:ready slider:changed", function (event, data) {					jQuery(this).nextAll(".output:first").html(data.value.toFixed(2));				});				</script>				<!-- GRADIENT OPTIONS -->				<tr class="pattopt_3">					<th scope="row"><?php _e('Gradient Overlay','fsbwether'); ?></th>					<td>			        <div id="gradX" ></div>			        <strong>Warning:</strong> Keep transparency on the gradient to see the background.			        <script>			            gradX("#gradX", {			            	sliders: [							<?php 							if($options['gradx_code']){								$subject = strstr($options['gradx_code'],'background: -o-linear-gradient',true);								$pattern = '/(rgb|rgba)\(([^\)]*)\) [0-9]+%/'; 								preg_match_all($pattern, $subject, $matches);								$numItems = count($matches[0]); $i;								foreach ($matches[0] as $key) {									$key = str_replace(') ', ')", position: ', $key);									$key = str_replace("%", "", $key);									if(++$i === $numItems) {								    	echo "{color: \"$key}\n"; //последно									} else {										echo "{color: \"$key},\n";									}								}							} else {								echo "{color: \"rgba(255, 255, 255, .30)\", position: 50},";								echo "{color: \"rgba(255, 255, 255, .30)\", position: 50}";							}							?>							],							<?php if($options['gradx_gradient_type']) echo "type: '".$options['gradx_gradient_type']."'," ?>							<?php if($options['gradx_gradient_type']) echo "type: '".$options['gradx_gradient_type']."'," ?>							code_shown: true			            });			        </script>					<?php 					/* Quick debug					if($options['gradx_code']){						$subject = strstr($options['gradx_code'],'background: -o-linear-gradient',true);						$pattern = '/(rgb|rgba)\(([^\)]*)\) [0-9]+%/'; 						preg_match_all($pattern, $subject, $matches);						$numItems = count($matches[0]); $i;						foreach ($matches[0] as $key) {							$key = str_replace(') ', ')", position: ', $key);							$key = str_replace("%", "", $key);							if(++$i === $numItems) {						    	echo "{color: \"$key}<br />\n"; //последно							} else {								echo "{color: \"$key},<br />\n";							}						}					} else {						echo "{color: \"rgba(255, 255, 255, .30)\", position: 50},";						echo "{color: \"rgba(255, 255, 255, .30)\", position: 50}";					}					*/					?>					</td>				</tr>				<tr>					<th scope="row"><?php _e('Location picker','fsbwether'); ?></th>					<td>						<ul id="singleFieldTags"></ul>						<?php _e('Type cities to show in the location selector menu. Delete all to disable.<strong>(Default: None)</strong>','fsbwether'); ?>						<input type="hidden" name="fsbwether_options[fsbwCitiesMenu]" id="fsbwCitiesMenu" value="<?php if($options['fsbwCitiesMenu']) echo $options['fsbwCitiesMenu']; ?>">					</td>				</tr>				<script>				jQuery(function(){					/*var sampleTags = ['Shanghai', 'Karachi', 'Mumbai', 'Delhi', 'Ahmedabad', 'Istanbul', 'Sao Paulo',										'Moscow', 'Seoul', 'Beijing', 'Mexico City', 'Tokyo', 'Kinshasa', 'Jakarta', 'New York',										'Lima', 'London', 'Bogota', 'Tehran', 'Ho Chi Minh City', 'Hanoi', 'Hong Kong', 'Bangkok',										'Dhaka', 'Cairo', 'Lahore', 'Rio de Janeiro', 'Chongqing', 'Chennai', 'Bengaluru', 'Tianjin',										'Baghdad', 'Kolkata', 'Singapore', 'Riyadh', 'Saint Petersburg', 'Surat', 'Yangon', 'Nairobi',										'Buenos Aires', 'Jaipur', 'Madrid', 'Kanpur', 'Jeddah', 'Pyongyang', 'Berlin', 'Pune', 'Durban',										'Cape Town', 'Busan', 'Abidjan', 'Sofia', 'Yokohama', 'Wuhan', 'Los Angeles', 'Johannesburg', 'Ankara',										'Hyderabad', 'Shenyang', 'Alexandria', 'Shaoxing', 'Varna', 'Pazardzhik'];*/					jQuery('#singleFieldTags').tagit({						//availableTags: sampleTags,						singleField: true,						singleFieldNode: jQuery('#fsbwCitiesMenu')					});				});				</script>				<tr>					<th scope="row"><?php _e('Fixed position module','fsbwether'); ?></th>					<td>						<label><input type="checkbox" name="fsbwether_options[fsbwFixedModule]" <?php if($options['fsbwFixedModule']){ ?> checked <?php } ?> value="1"> <?php _e('Enable/Disable the fixed position module.<strong>(Default: Enabled)</strong>','fsbwether'); ?></label>					</td>				</tr>				<tr>					<th scope="row"><?php _e('Weather Module Collapsable','fsbwether'); ?></th>					<td>						<label><input type="checkbox" name="fsbwether_options[fsbwWidget]" <?php if($options['fsbwWidget']){ ?> checked <?php } ?> value="1"> <?php _e('Enable/Disable the user to hide and collapse the weather module. <strong>(Default: Enabled)</strong>','fsbwether'); ?></label>					</td>				</tr>				<tr>					<th scope="row"><?php _e('Disable Video','fsbwether'); ?></th>					<td>						<label><input type="checkbox" name="fsbwether_options[fsbwNoVideo]" <?php if($options['fsbwNoVideo']){ ?> checked <?php } ?> value="1"> <?php _e('Set to true if you want to disable video background and use only the static widget. <strong>(Default: Enabled)</strong>','fsbwether'); ?></label>					</td>				</tr>				<tr>					<th scope="row"><?php _e('Weather Module Style <a href="javascript:void(0)" title="Keep in mind that you can easly create new styles using the stylesheet and adding new classes.">[?]</a>','fsbwether'); ?></th>					<td>					<div id="gadgetselect">						<?php						  // These files will be ignored						  $excludedFiles = array ('.htaccess');						  // These file extensions will be ignored						  $excludedExtensions = array (						    'jpg',						    'htm',						    'html',						    'php'						  );						  // Make sure we ignore . and ..						  $excludedFiles = array_merge($excludedFiles,array('.','..')); 						  // Convert to lower case so we are not case-sensitive						  for ($i = 0; isset($excludedFiles[$i]); $i++) $excludedFiles[$i] = strtolower(ltrim($excludedFiles[$i],'.'));						  for ($i = 0; isset($excludedExtensions[$i]); $i++) $excludedExtensions[$i] = strtolower($excludedExtensions[$i]);						  // Loop through directory						  $count = 0;						  if ($handle = opendir(plugin_dir_path( __FILE__ )."/css/module")) {						    while (false !== ($file = readdir($handle))) {						      $extn = explode('.',$file);						      $extn = array_pop($extn);						      // Only echo links for files that don't match our rules						      if (!in_array(strtolower($file),$excludedFiles) && !in_array(strtolower($extn),$excludedExtensions) && $file!="." && $file!="..") {						        $count++;						        $file = str_replace(".css", "", $file);						        print("<label> <input type=\"radio\" name=\"fsbwether_options[fsbwWidgetStyle]\" value=\"".$file."\" checked> <img src=\"".plugins_url('',__FILE__)."/css/module/".$file.".jpg\" /></label>");						      }						    }						    closedir($handle);						  }						?>					</div>					<br />					<label><input type="checkbox" name="fsbwether_options[fsbwWidgetActive]" <?php if($options['fsbwWidgetActive']){ ?> checked <?php } ?> value="1"> <?php _e('Should the widget be active by default or hidden. Set a tick for active. <strong>(Default: Active)</strong>','fsbwether'); ?></label>					</td>				</tr>				<tr class="show-admin-bar">					<th scope="row"></th>					<td>						<fieldset>							<legend class="screen-reader-text"><span></span></legend>							<label><input type="submit" value="<?php _e('Save Settings') ?>" class="button-primary" id="fsbwether_update" name="fsbwether_update">	</label>							<br>						</fieldset>					</td>				</tr>			</tbody>		</table>		</form>	</div></div><?php}//---------------------------------------------------------------------------------------------------------------------------------------//-------------------	POST AND PAGE BACKEND OPTIONS -----------------------------------------------------------------------------------//---------------------------------------------------------------------------------------------------------------------------------------// Hook for adding page/post custom mata boxesadd_action("admin_menu", "fsbwether_post_meta_box_options");add_action('save_post', 'fsbwether_post_meta_box_save');function fsbwether_post_meta_box_options(){	if( function_exists( 'add_meta_box' ) ) {		$post_types=get_post_types(); 		foreach($post_types as $post_type) {			add_meta_box("fsbwether_post_metas", "Fullscreen Weather Background", "fsbwether_post_meta_box_add", $post_type, "normal", "high");		}	} else{	}}function fsbwether_post_meta_box_add() {		global $post;		$custom = get_post_custom($post->ID);		$fsbwCustom_Disable 			= $custom["fsbwCustom_Disable"][0];		$fsbwCustom_WidgetDisable 		= $custom["fsbwCustom_WidgetDisable"][0];		$fsbwCustom_OverlayDisable 		= $custom["fsbwCustom_OverlayDisable"][0];		$fsbwCustom_LocationCity 		= $custom["fsbwCustom_LocationCity"][0];		$fsbwCustom_LocationZIP 		= $custom["fsbwCustom_LocationZIP"][0];		$fsbwCustom_LocationWOEID 		= $custom["fsbwCustom_LocationWOEID"][0];?>	<div class="fsbwether_checkbox" style="margin-botom:5px;">		<h3>Weather Background Controls</h3>		<input type="checkbox" name="fsbwCustom_Disable" id="fsbwCustom_Disable" <?php if($fsbwCustom_Disable){ ?> checked <?php } ?> value="true"/>&nbsp;<label for="fsbwCustom_Disable"><?php _e('Check this if you want to <strong>disable</strong> the weather background on this page.'); ?> </label> <br style="clear:both" />		<input type="checkbox" name="fsbwCustom_WidgetDisable" id="fsbwCustom_WidgetDisable" <?php if($fsbwCustom_WidgetDisable){ ?> checked <?php } ?> value="true"/>&nbsp;<label for="fsbwCustom_WidgetDisable"><?php _e('Check this if you want to <strong>disable</strong> the fixed weather module on this page.'); ?> </label> <br style="clear:both" />		<input type="checkbox" name="fsbwCustom_OverlayDisable" id="fsbwCustom_OverlayDisable" <?php if($fsbwCustom_OverlayDisable){ ?> checked <?php } ?> value="true"/>&nbsp;<label for="fsbwCustom_OverlayDisable"><?php _e('Check this if you want to <strong>disable</strong> the custom overlay.'); ?> </label> <br style="clear:both" />	</div>	<div class="fsbwether_checkbox" style="margin-botom:5px;">		<h3>Custom Location</h3>		<input type="text" name="fsbwCustom_LocationCity" id="fsbwCustom_LocationCity" <?php if($fsbwCustom_LocationCity){ echo "value=\"".$fsbwCustom_LocationCity."\""; } ?> /> <label for="fsbwCustom_LocationCity"><?php _e('Enter city','fsbwether'); ?> </label> <br style="clear:both" />		<input type="text" name="fsbwCustom_LocationZIP" id="fsbwCustom_LocationZIP" <?php if($fsbwCustom_LocationZIP){ echo "value=\"".$fsbwCustom_LocationZIP."\""; } ?> /> <label for="fsbwCustom_LocationZIP"><?php _e('Enter ZIP','fsbwether'); ?> </label> <br style="clear:both" />		<input type="text" name="fsbwCustom_LocationWOEID" id="fsbwCustom_LocationWOEID" <?php if($fsbwCustom_LocationWOEID){ echo "value=\"".$fsbwCustom_LocationWOEID."\""; } ?> /> <label for="fsbwCustom_LocationWOEID"><?php _e('Enter WOEID','fsbwether'); ?> </label> <br style="clear:both" />	</div>	<input type="hidden" name="meta_is_submit" value="yes" /><?php }//update post custom fieldsfunction fsbwether_post_meta_box_save($post_id) {	global $post;	if(isset($_POST['meta_is_submit'])){		update_post_meta($post_id, "fsbwCustom_Disable",		$_POST['fsbwCustom_Disable']);		update_post_meta($post_id, "fsbwCustom_WidgetDisable",	$_POST['fsbwCustom_WidgetDisable']);		update_post_meta($post_id, "fsbwCustom_OverlayDisable",	$_POST['fsbwCustom_OverlayDisable']);		update_post_meta($post_id, "fsbwCustom_LocationCity",	$_POST['fsbwCustom_LocationCity']);		update_post_meta($post_id, "fsbwCustom_LocationZIP",	$_POST['fsbwCustom_LocationZIP']);				update_post_meta($post_id, "fsbwCustom_LocationWOEID",	$_POST['fsbwCustom_LocationWOEID']);	}}function execute_weather() {	$options = get_option('fsbwether_options'); 	global $post;	$custom = get_post_custom($post->ID);			echo "<style>\n";		if($options['fsbwWidgetActive'] != 1)			echo ".fixed-weather {display:none;}";		if($options['fsbwUsePattern'] == 'option3'){			echo "#video-shards-pattern.we_gradient{\n";				echo $options['gradx_code'];			echo "}";		}		echo "</style>";	} add_action('wp_head', 'execute_weather'); // Add hook for front-end <head></head>add_action('wp_footer','fsbwether');function fsbwether(){		$options = get_option('fsbwether_options'); 		global $post;		$custom = get_post_custom($post->ID);		$fsbwCustom_Disable 		= $custom["fsbwCustom_Disable"][0];		$fsbwCustom_WidgetDisable 	= $custom["fsbwCustom_WidgetDisable"][0];		$fsbwCustom_OverlayDisable 	= $custom["fsbwCustom_OverlayDisable"][0];		$fsbwCustom_LocationCity 	= $custom["fsbwCustom_LocationCity"][0];		$fsbwCustom_LocationCity 	= $custom["fsbwCustom_LocationZIP"][0];		$fsbwCustom_LocationCity 	= $custom["fsbwCustom_LocationWOEID"][0];		$fsbwEnable					=	$options['fsbwEnable'];		$fsbwAutodetect				=	$options['fsbwAutodetect'];		$fsbwCity					=	$options['fsbwCity'];		$fsbwZIP					=	$options['fsbwZIP'];		$fsbwWOEID					=	$options['fsbwWOEID'];		$fsbwUnit					=	$options['fsbwUnit'];		$fsbwPattern				=	$options['fsbwPattern'];		$fsbwCPattern				=	$options['fsbwCPattern'];		$fsbwWidget					=	$options['fsbwWidget'];		$fsbwNoVideo				=	$options['fsbwNoVideo'];		$fsbwWidgetActive			=	$options['fsbwWidgetActive'];		$fsbwWidgetStyle			=	$options['fsbwWidgetStyle'];		$fsbwFixedModule			=	$options['fsbwFixedModule'];		$fsbwUsePattern				=	$options['fsbwUsePattern'];		$fsbwCitiesMenu				=	$options['fsbwCitiesMenu'];		$gradx_code					=	$options['gradx_code'];		$fsbw_shards_color1			= 	$options['fsbw_shards_color1'];		$fsbw_shards_color2			= 	$options['fsbw_shards_color2'];		$fsbw_shards_shadecolor		= 	$options['fsbw_shards_shadecolor'];		$fsbw_shards_countshards	= 	$options['fsbw_shards_countshards'];		$fsbw_shards_comlexity		= 	$options['fsbw_shards_comlexity'];		$fsbw_shards_lightness		= 	$options['fsbw_shards_lightness'];		$fsbw_shards_alpha			= 	$options['fsbw_shards_alpha'];		if($fsbwEnable){ //ПЛУГИНА Е АКТИВИРАН		$pat = "";		if($fsbwUsePattern && !$fsbwCustom_OverlayDisable){				switch ($fsbwUsePattern) {				    case 'option0':				        $pat .= "";				        break;				    case 'option1':					    	if(!$fsbwCPattern) {								$pat .= "jQuery('.video-background').prepend('<div id=\"video-pattern\" style=\"background-image:url(\'".plugins_url( 'assets/'.$fsbwPattern.'.png' , __FILE__ )."\');\"></div>');";							} else {					        	$pat .= "jQuery('.video-background').prepend('<div id=\"video-pattern\" style=\"background-image:url(\'".$fsbwCPattern."\');\"></div>');";					        }				        break;				    case 'option2':						$pat .= "jQuery('.video-background').prepend('<div id=\"video-shards-pattern\"></div>');";						$pat .= "jQuery('#video-shards-pattern').shards([".$fsbw_shards_color1."],[".$fsbw_shards_color2."],[".$fsbw_shards_shadecolor."],".$fsbw_shards_countshards.",".$fsbw_shards_comlexity.",".$fsbw_shards_lightness.",".$fsbw_shards_alpha.",true);";				        break;				    case 'option3':				    	$pat .= "jQuery('.video-background').prepend('<div id=\"video-shards-pattern\" class=\"we_gradient\"></div>');";				    	break;							}		}		if($fsbwFixedModule && !$fsbwCustom_WidgetDisable) {			if($fsbwWidget) {				$class = ""; 				if($options['fsbwWidgetActive'] ) $class = "active"; 					echo "<div id=\"fixed-reload\" class=".$class."></div>";			}			echo "<div class=\"fixed-weather\" id=\"fixed-weather1\"></div>";		}		echo "		    <script>				jQuery(function() {					jQuery.wBackground({ \n";				  echo "zIndex: 3,						success: function(weather) {							html = '<a href=\"#\">';							html += '<img class=\"ffwb-image\" src=\"'+weather.image+'\" style=\"height:60px;\"/>';							html += '</a>';";		if(isset($options['fsbwCitiesMenu']) && !empty($options['fsbwCitiesMenu'])){				  echo "	html += '<ul>';				  			html += '<li><a href=\"?fsbw=default\">Default</a></li>';";			$citiesmenu = $options['fsbwCitiesMenu'];			$citiesmenu = explode( ',', $citiesmenu );			foreach($citiesmenu as $city){				  echo "    html += '<li><a href=\"?fsbw=".$city."\">".$city."</a></li>';";			}				  echo "	html += '</ul>';";		}				  echo "	html += '<div id=\"fixed-weather-divider\">';							html += '</div>';							html += '<h1 class=\"ffwb-degree\">'+weather.temp+'</h1> ';							html += '<small class=\"ffwb-city\">'+weather.city+'</small>';							html += '<date>".date("d.m.Y")."</date>';							jQuery('.fixed-weather').html(html); 							".$pat."						}					});";			if($fsbwFixedModule && $fsbwWidget){				echo "			        jQuery(\"#fixed-reload\").click(function() {			            jQuery(\".fixed-weather\").animate({width:'toggle', opacity: 'toggle'}, 350);			            jQuery(this).toggleClass('active', 550);			            return false;			        });";		$str = <<<EOF	jQuery(".video-background, #video-shards-pattern, #video-pattern").mousedown(function(){return false});	jQuery("html, body").animate({ scrollTop: 1 }, 1000);EOF;				echo $str;			}		echo "				});						</script>";	}	$opidebug = get_option('fsbwdebug_options');	if($opidebug['fsbwdebug']) {		echo "<div style='position:fixed;top:50%;left:0;z-index:9999;overflow-y:auto;height:200px;margin-top:-100px;padding:0px;background:#f5f5f5;-moz-box-shadow:0 0 15px #000;-webkit-box-shadow:0 0 15px #000;box-shadow:0 0 15px #000;'>";			var_dump($options);		echo "</div>";	}}/*						html = '<h3>'+weather.city+', '+weather.region+' '+weather.country+'</h3>';html += '<p><strong>Today\'s High</strong>: '+weather.high+'&deg; '+weather.units.temp+' - <strong>Today\'s Low</strong>: '+weather.low+'&deg; '+weather.units.temp+'</p>';html += '<p><strong>Current Temp</strong>: '+weather.temp+'&deg; '+weather.units.temp+' ('+weather.tempAlt+'&deg; C)</p>';html += '<p><strong>Condition Code</strong>: '+weather.code+'</p>';html += '<p><strong>Thumbnail</strong>: <img src=\"'+weather.thumbnail+'\"></p>';html += '<p><strong>Wind</strong>: '+weather.wind.direction+' '+weather.wind.speed+' '+weather.units.speed+' <strong>Wind Chill</strong>: '+weather.wind.chill+'</p>';html += '<p><strong>Currently</strong>: '+weather.currently+' - <strong>Forecast</strong>: '+weather.forecast+'</p>';html += '<p><img src=\"'+weather.image+'\"></p>';html += '<p><strong>Humidity</strong>: '+weather.humidity+' <strong>Pressure</strong>: '+weather.pressure+' <strong>Rising</strong>: '+weather.rising+' <strong>Visibility</strong>: '+weather.visibility+'</p>';html += '<p><strong>Heat Index</strong>: '+weather.heatindex+'</p>';html += '<p><strong>Sunrise</strong>: '+weather.sunrise+' - <strong>Sunset</strong>: '+weather.sunset+'</p>';html += '<p><strong>Tomorrow\'s Date</strong>: '+weather.tomorrow.day+' '+weather.tomorrow.date+'<br /><strong>Tomorrow\'s High/Low</strong>: '+weather.tomorrow.high+'/'+weather.tomorrow.low+'<br /><strong>Tomorrow\'s Condition Code</strong>: '+weather.tomorrow.code+'<br /><strong>Tomorrow\'s Forecast</strong>: '+weather.tomorrow.forecast+'<br /> <strong>Tomorrow\'s Image</strong>: '+weather.tomorrow.image+'</p>';html += '<p><strong>Last updated</strong>: '+weather.updated+'</p>';html += '<p><a href=\"'+weather.link+'\">View forecast at Yahoo! Weather</a></p>';						*/?>